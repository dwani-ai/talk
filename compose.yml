# Set env vars in .env or export before: docker compose up -d
# DWANI_API_BASE_URL_TTS, DWANI_API_BASE_URL_ASR, DWANI_API_BASE_URL_LLM (required)
# DWANI_LLM_MODEL (optional, default: gemma3)
# For same-host TTS/ASR/LLM use http://host.docker.internal:PORT (Linux: extra_hosts below enables it)
services:
  talk:
    build: .
    ports:
      - "80:8000"
    environment:
      DWANI_API_BASE_URL_TTS: ${DWANI_API_BASE_URL_TTS}
      DWANI_API_BASE_URL_ASR: ${DWANI_API_BASE_URL_ASR}
      DWANI_API_BASE_URL_LLM: ${DWANI_API_BASE_URL_LLM}
      DWANI_LLM_MODEL: ${DWANI_LLM_MODEL:-gemma3}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
