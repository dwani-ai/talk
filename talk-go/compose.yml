# Set env vars in .env or export before: docker compose up -d
# Required: DWANI_API_BASE_URL_TTS, DWANI_API_BASE_URL_ASR, DWANI_API_BASE_URL_LLM
# Optional: DWANI_LLM_MODEL (default: gemma3)
services:
  talk:
    build: .
    ports:
      - "80:8000"
    environment:
      DWANI_API_BASE_URL_TTS: ${DWANI_API_BASE_URL_TTS}
      DWANI_API_BASE_URL_ASR: ${DWANI_API_BASE_URL_ASR}
      DWANI_API_BASE_URL_LLM: ${DWANI_API_BASE_URL_LLM}
      DWANI_LLM_MODEL: ${DWANI_LLM_MODEL:-gemma3}
      PORT: "8000"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
